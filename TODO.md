# TODO list

## Текущие

Добавить в задании действие rebalance. Аттрибут type определяет алгоритм балансировки:
  * fix_total - добиться желаемых пропрорций при неизменной общей сумме, полезно для ИИС типа Б с лимитом по сумме.
  * buy_only - разрешена только покупка бумаг.

Подтеги make key="ключ последней группировки" value="желаемое значение в процентах". 

В результате высвечивается сколько надо купить/продать в каждой группе, чтобы получились указанные пропорции. Если указанного ключа нет, то он добавляется. Если указаны не все ключи, то для fix_total их доли будут считаться равными нулю, для buy_only - неизменными.

* Добавить в задании действия buy/sell для просмотра, что будет с результатами группироки при докупке/продаже бумаг. 
* Добавить в вывод по результатам группировки неиспользованные группы.
* Перевести наличность из Settings.xml в data/reports/cash.xml
* Парсер отчетов Тинькова.
* Тесты.
	* Юнит тесты на песочнице.
  * Проверить вложенную группировку. Вероятно, доли при этом учитываются неправильно. Надо перменожать коэффициент коррекции.
* Учитывать наличность из отчетов брокера, добавлять в остальную наличность.
* Аргументы командной строки
* GUI. Pie charts.
* Человеческие названия у групп. Вместо кодов - названия стран, валют, активов и т.п.
* Каждой бумаге добавить аттрибут name, в котором будет храниться название. Например, SBER и SBERP - Сбербанк акция обыкновенная и Сбербанк акция привилегированная. Чтобы показывать это имя вместо тикера.
* Группировка по регионам и уровню развитости страны.
* В issuers.xml у ETF добавить аттрибут index. В нем будет ссылка на описание индекса, за которым следует ETF. Описания хранятся в indexes.xml с теми же параметрами, что у ETF. Это избавит от проблемы с дублированием данных в разных ETF на один индекс.

## Сделано

* Добавить в settings.xml пути к файлам с инфой по бумагам, странам, секторам, к директории с отчетами.

* Добавить в пакетное задание для группировки аттрибут join: список групп для объединения в одну. Все группы будут сливаться в первую указанную. Несколько отдельных сливаний разделять например чертой |
* Заполнить сектора у недостающих эмитентов.
* Группировка по секторам с уровнями вложенности.

* Добавить список стран с инфой по регионам и уровню развитости экономики.
* Почистить названия эмитентов в issuers.xml.
* UserManual.md
* Пакетные задания в task.xml. 
	  * Группировка, в том числе рекурсивная.
	  * Скрывать результаты ниже указанного %.
	  * Удаление ключей из результата. Аттрибут remove_keys в тэге group.
	  * Оставление ключей. Аттрибут keep_only_keys в тэге group.
	  * Сортировка результатов.
	  * Удаление отдельных акций из результата.
	  * Оставление только отдельных акций в результате.
